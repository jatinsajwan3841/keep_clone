(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{133:function(e,t,n){},143:function(e,t,n){},145:function(e,t,n){},150:function(e,t){},152:function(e,t){},166:function(e,t){},168:function(e,t){},196:function(e,t){},198:function(e,t){},199:function(e,t){},204:function(e,t){},206:function(e,t){},225:function(e,t){},237:function(e,t){},240:function(e,t){},257:function(e,t,n){},262:function(e,t,n){},263:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),s=n(134),r=n.n(s),o=(n(143),n(17)),i=n(74),l=n(9),u=n.n(l),j=n(73),d=n(19),p=(n(145),n(29)),m=n(1),b=function(e){var t=e.layt,n=e.layout,a=e.darkMode,c=e.setDarkMode,s=e.history;return Object(m.jsxs)("header",{className:"header",children:[Object(m.jsx)("img",{src:"https://www.gstatic.com/images/branding/product/1x/keep_2020q4_48dp.png"}),Object(m.jsx)("p",{className:"KC",children:"Keep clone"}),Object(m.jsx)("div",{className:"layoutBtn",onClick:function(){return t()},children:n?Object(m.jsx)(p.b,{}):Object(m.jsx)(p.a,{})}),Object(m.jsx)("div",{className:"layoutBtn",onClick:function(){return c(!a)},children:a?Object(m.jsx)(p.d,{}):Object(m.jsx)(p.e,{})}),Object(m.jsx)("div",{className:"layoutBtn",onClick:function(){localStorage.removeItem("token"),s.push("/login")},children:Object(m.jsx)(p.c,{})})]})},h=function(e,t){var n=c.a.useState((function(){var n=window.localStorage.getItem(t);return null!==n?JSON.parse(n):e})),a=Object(o.a)(n,2),s=a[0],r=a[1];return c.a.useEffect((function(){window.localStorage.setItem(t,JSON.stringify(s))}),[t,s]),[s,r]},x=n(135),f=n.n(x),O=n(5),g=Object(a.createContext)(),v=(n(257),n(138)),k=function(){var e=c.a.useState(""),t=Object(o.a)(e,2),n=t[0],a=t[1],s=c.a.useState([]),r=Object(o.a)(s,2),l=r[0],p=r[1],x=c.a.useState(!1),k=Object(o.a)(x,2),N=k[0],y=k[1],w=h(!0,"layout"),S=Object(o.a)(w,2),C=S[0],I=S[1],T=h(!1,"dark-mode"),L=Object(o.a)(T,2),P=L[0],E=L[1],J=Object(O.e)(),_=c.a.useContext(g).setLoading,q=function(){var e=Object(d.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""==n){e.next=19;break}return t={value:n},_(!0),e.next=5,fetch("".concat("https://keep-clone41.herokuapp.com/api/notes"),{method:"POST",headers:{"Content-Type":"application/json","x-access-token":localStorage.getItem("token")},body:JSON.stringify(t)});case 5:if(c=e.sent,_(!1),200!==c.status){e.next=16;break}return e.next=10,c.json();case 10:t=e.sent,p([].concat(Object(j.a)(l),[t])),a(""),y(!1),e.next=17;break;case 16:alert("something went wrong, try again!");case 17:e.next=20;break;case 19:y(!1);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.next=3,fetch("".concat("https://keep-clone41.herokuapp.com/api","/notes?id=").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json","x-access-token":localStorage.getItem("token")}});case 3:n=e.sent,_(!1),200===n.status?p(l.filter((function(e){return e._id!=t}))):alert("something went wrong");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.findIndex((function(e){return e._id===t})),a=Object(j.a)(l),c=a[n].isCompleted,e.next=5,fetch("".concat("https://keep-clone41.herokuapp.com/api","/notes?id=").concat(t,"&isCompleted=").concat(!c),{method:"PUT",headers:{"Content-Type":"application/json","x-access-token":localStorage.getItem("token")},body:JSON.stringify({value:a[n].value})});case 5:200===e.sent.status?(a[n]=Object(i.a)(Object(i.a)({},a[n]),{},{isCompleted:!c}),p(a)):alert("something went wrong");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.useEffect((function(){var e=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://keep-clone41.herokuapp.com/api/notes"),{method:"GET",headers:{"Content-Type":"application/json","x-access-token":t}});case 2:if(200!==(n=e.sent).status){e.next=12;break}return e.next=6,n.json();case 6:return n=e.sent,e.next=9,p(n);case 9:_(!1),e.next=13;break;case 12:401===n.status&&(_(!1),localStorage.removeItem("token"),alert("relogin again"),J.replace("/login"));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=localStorage.getItem("token");t?f.a.decode(t)?e(t):(localStorage.removeItem("token"),_(!1),J.replace("/login")):(_(!1),J.replace("/login"))}),[]),Object(m.jsxs)("div",{className:"main ".concat(P&&"darkMode"),children:[Object(m.jsx)(b,{layt:function(){I((function(e){return!e}))},layout:C,darkMode:P,setDarkMode:E,history:J}),Object(m.jsx)("form",{className:"addNote",children:Object(m.jsx)("textarea",{rows:N?3:1,value:n,onClick:function(){return y(!0)},onChange:function(e){return a(e.target.value)},onBlur:q,placeholder:"Take your note..."})}),l!=[]?Object(m.jsx)("ul",{className:"container ".concat(!C&&"f"),children:l.map((function(e){return Object(m.jsx)("li",{className:"noteholder ".concat(!C&&"f"),children:Object(m.jsxs)("div",{className:"note-text ".concat(!C&&"f"),children:[Object(m.jsx)("span",{className:e.isCompleted&&"cross",children:e.value}),Object(m.jsxs)("span",{className:"tools",children:[Object(m.jsx)("span",{className:"date",children:"".concat(new Date(e.date).toLocaleString())}),Object(m.jsx)("button",{className:"btn",onClick:function(){return D(e._id)},children:Object(m.jsx)(v.a,{})}),Object(m.jsx)("input",{className:"btn",type:"checkbox",id:"completed",checked:e.isCompleted,onClick:function(){return M(e._id)}})]})]})},e._id)}))}):null]})},N=n(23),y=(n(133),function(){var e=Object(O.e)(),t=c.a.useContext(g).setLoading,n=function(){var n=Object(d.a)(u.a.mark((function n(a){var c,s,r,o;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),t(!0),c=a.target.email.value,s=a.target.password.value,n.next=6,fetch("".concat("https://keep-clone41.herokuapp.com/api/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c,password:s})});case 6:if(200!==(r=n.sent).status){n.next=15;break}return n.next=10,r.json();case 10:o=n.sent,localStorage.setItem("token",o.user),e.push("/"),n.next=17;break;case 15:t(!1),alert("wrong username or password");case 17:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return c.a.useEffect((function(){localStorage.getItem("token")&&e.replace("/")}),[]),Object(m.jsxs)("div",{className:"login-container",children:[Object(m.jsxs)("h3",{className:"start",children:["Let's set go ",Object(m.jsx)("span",{className:"high",children:"\u2570(*\xb0\u25bd\xb0*)\u256f"})," "]}),Object(m.jsx)("div",{className:"avatar"}),Object(m.jsxs)("form",{onSubmit:n,children:[Object(m.jsxs)("div",{className:"inp-content",children:[Object(m.jsx)("label",{htmlFor:"email",className:"label",children:"Please enter your email"}),Object(m.jsx)("input",{type:"email",name:"email",placeholder:" ",required:!0}),Object(m.jsx)("hr",{className:"border-bottom"}),Object(m.jsx)("span",{className:"placeholder",children:"email"})]}),Object(m.jsxs)("div",{className:"inp-content",children:[Object(m.jsx)("label",{htmlFor:"password",className:"label",children:"Please enter your password"}),Object(m.jsx)("input",{type:"password",name:"password",placeholder:" ",minLength:"6",required:!0}),Object(m.jsx)("hr",{className:"border-bottom"}),Object(m.jsx)("span",{className:"placeholder",children:"password"})]}),Object(m.jsx)("center",{children:Object(m.jsx)("input",{type:"submit",value:"Login",className:"form-button"})}),Object(m.jsx)(N.b,{to:"/register",className:"link",children:"Click here to register"})]})]})}),w=function(){var e=Object(O.e)(),t=c.a.useContext(g).setLoading,n=function(){var n=Object(d.a)(u.a.mark((function n(a){var c,s,r,o;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),t(!0),c=a.target.email.value,s=a.target.email.value,r=a.target.password.value,n.next=7,fetch("".concat("https://keep-clone41.herokuapp.com/api/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:c,email:s,password:r})});case 7:o=n.sent,t(!1),200===o.status?e.push("/login"):alert("user already exist");case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return c.a.useEffect((function(){localStorage.getItem("token")&&e.replace("/")}),[]),Object(m.jsxs)("div",{className:"login-container",children:[Object(m.jsxs)("h3",{className:"start",children:["Let's get started ",Object(m.jsx)("span",{className:"high",children:"\u2570(*\xb0\u25bd\xb0*)\u256f"})," "]}),Object(m.jsx)("div",{className:"avatar"}),Object(m.jsxs)("form",{onSubmit:n,children:[Object(m.jsxs)("div",{className:"inp-content",children:[Object(m.jsx)("label",{htmlFor:"name",className:"label",children:"Please enter your name"}),Object(m.jsx)("input",{type:"text",name:"name",placeholder:" ",minLength:"3",required:!0}),Object(m.jsx)("hr",{className:"border-bottom"}),Object(m.jsx)("span",{className:"placeholder",children:"name"})]}),Object(m.jsxs)("div",{className:"inp-content",children:[Object(m.jsx)("label",{htmlFor:"email",className:"label",children:"Please enter your email"}),Object(m.jsx)("input",{type:"email",name:"email",placeholder:" ",required:!0}),Object(m.jsx)("hr",{className:"border-bottom"}),Object(m.jsx)("span",{className:"placeholder",children:"email"})]}),Object(m.jsxs)("div",{className:"inp-content",children:[Object(m.jsx)("label",{htmlFor:"password",className:"label",children:"Please enter your password"}),Object(m.jsx)("input",{type:"password",name:"password",placeholder:" ",minLength:"6",required:!0}),Object(m.jsx)("hr",{className:"border-bottom"}),Object(m.jsx)("span",{className:"placeholder",children:"password"})]}),Object(m.jsx)("center",{children:Object(m.jsx)("input",{type:"submit",value:"Register",className:"form-button"})}),Object(m.jsx)(N.b,{to:"/login",className:"link",children:"Click here to login"})]})]})},S=(n(262),function(){return Object(m.jsx)("div",{className:"loading-container",children:Object(m.jsx)("span",{className:"loading"})})});var C=function(){var e=c.a.useState(!1),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(m.jsxs)(g.Provider,{value:{setLoading:a},children:[n&&Object(m.jsx)(S,{}),Object(m.jsxs)(N.a,{basename:"/keep_clone",children:[Object(m.jsx)(O.a,{path:"/login",exact:!0,component:y}),Object(m.jsx)(O.a,{path:"/register",exact:!0,component:w}),Object(m.jsx)(O.a,{path:"/",exact:!0,component:k})]})]})};r.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(C,{})}),document.getElementById("root"))}},[[263,1,2]]]);
//# sourceMappingURL=main.34fdfa4c.chunk.js.map