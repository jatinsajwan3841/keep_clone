(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{149:function(e,t,a){},150:function(e,t,a){},164:function(e,t){},166:function(e,t){},179:function(e,t){},181:function(e,t){},209:function(e,t){},211:function(e,t){},212:function(e,t){},217:function(e,t){},219:function(e,t){},225:function(e,t){},227:function(e,t){},246:function(e,t){},258:function(e,t){},261:function(e,t){},278:function(e,t,a){},279:function(e,t,a){},280:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a.n(n),s=a(141),r=a.n(s),o=(a(149),a(10)),l=a(78),i=a(6),j=a(79),u=a(13),d=(a(150),a(34)),p=a(1),b=function(e){var t=e.layt,a=e.layout,n=e.darkMode,c=e.setDarkMode,s=e.history,r=e.dp,o=e.handleProfile;return Object(p.jsxs)("header",{className:"header",children:[Object(p.jsx)("img",{src:"https://www.gstatic.com/images/branding/product/1x/keep_2020q4_48dp.png"}),Object(p.jsx)("p",{className:"KC",children:"Keep clone"}),Object(p.jsx)("div",{className:"layoutBtn",onClick:o,children:"false"!==r?Object(p.jsx)("img",{className:"dp",alt:"dp",src:"data:image/jpeg;base64,".concat(r)}):Object(p.jsx)("div",{className:"dp"})}),Object(p.jsx)("div",{className:"layoutBtn",onClick:function(){return t()},children:a?Object(p.jsx)(d.b,{}):Object(p.jsx)(d.a,{})}),Object(p.jsx)("div",{className:"layoutBtn",onClick:function(){return c(!n)},children:n?Object(p.jsx)(d.d,{}):Object(p.jsx)(d.e,{})}),Object(p.jsx)("div",{className:"layoutBtn",onClick:function(){localStorage.removeItem("token"),s.push("/login")},children:Object(p.jsx)(d.c,{})})]})},m=a(8),h=Object(n.createContext)(),O=(a(52),function(e){var t=e.user,a=e.handleProfile,n=e.setUser,s=c.a.useState("false"),r=Object(o.a)(s,2),l=r[0],j=r[1],d=Object(m.e)(),b=c.a.useContext(h).setLoading,O=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var a,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=t.target.files[0])&&a.size<2e6?((n=new FileReader).onload=function(e){var t=btoa(e.target.result);j(t)},n.readAsBinaryString(a)):alert("please choose file of size less than 2MB!");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(u.a)(Object(i.a)().mark((function e(c){var s,r,o;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),b(!0),s=c.target.name.value,""===(r=c.target.password.value)&&(r=!1),e.next=7,fetch("".concat("https://keep-clone-unfl.onrender.com/api/update"),{method:"PUT",headers:{"Content-Type":"application/json","x-access-token":localStorage.getItem("token")},body:JSON.stringify({name:s,password:r,dp:l})});case 7:o=e.sent,b(!1),200===o.status?(alert("yay! successfully updated!"),n([s,t[1],l]),a(),r&&(localStorage.removeItem("token"),d.replace("/login"))):alert("Something went wrong");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.useEffect((function(){j(t[2])}),[]),Object(p.jsxs)("div",{className:"login-container",children:[Object(p.jsxs)("h3",{className:"start",children:["Here's your profile ",Object(p.jsx)("span",{className:"high",children:"\u2570(*\xb0\u25bd\xb0*)\u256f"})," "]}),Object(p.jsxs)("form",{onSubmit:f,children:[Object(p.jsxs)("label",{children:[Object(p.jsxs)("div",{className:"avatar",children:["false"!==l&&Object(p.jsx)("img",{className:"dp",alt:"dp",src:"data:image/jpeg;base64,".concat(l)}),Object(p.jsx)("span",{className:"upload"})]}),Object(p.jsx)("input",{type:"file",name:"dp",accept:".jpeg, .jpg,.png",onChange:O})]}),Object(p.jsxs)("div",{className:"inp-content",children:[Object(p.jsx)("label",{htmlFor:"name",className:"label",children:"Your name"}),Object(p.jsx)("input",{type:"text",name:"name",placeholder:" ",defaultValue:t[0],minLength:"3",required:!0}),Object(p.jsx)("hr",{className:"border-bottom"}),Object(p.jsx)("span",{className:"placeholder",children:"name"})]}),Object(p.jsxs)("div",{className:"inp-content",children:[Object(p.jsx)("label",{htmlFor:"email",className:"label",children:"Your email"}),Object(p.jsx)("input",{type:"email",name:"email",defaultValue:t[1],disabled:!0,required:!0}),Object(p.jsx)("hr",{className:"border-bottom"}),Object(p.jsx)("span",{className:"placeholder",children:"email"})]}),Object(p.jsxs)("div",{className:"inp-content",children:[Object(p.jsx)("label",{htmlFor:"password",className:"label",children:"Changing password will log you out!"}),Object(p.jsx)("input",{type:"password",name:"password",placeholder:" ",minLength:"6"}),Object(p.jsx)("hr",{className:"border-bottom"}),Object(p.jsx)("span",{className:"placeholder",children:"password"})]}),Object(p.jsx)("center",{children:Object(p.jsx)("input",{type:"submit",value:"Update",className:"form-button"})}),Object(p.jsx)("div",{className:"link",onClick:a,children:"Click here to go back!"})]})]})}),f=function(e,t){var a=c.a.useState((function(){var a=window.localStorage.getItem(t);return null!==a?JSON.parse(a):e})),n=Object(o.a)(a,2),s=n[0],r=n[1];return c.a.useEffect((function(){window.localStorage.setItem(t,JSON.stringify(s))}),[t,s]),[s,r]},x=a(143),g=a.n(x),v=(a(278),a(144)),N=function(){var e=c.a.useState(""),t=Object(o.a)(e,2),a=t[0],n=t[1],s=c.a.useState([]),r=Object(o.a)(s,2),d=r[0],x=r[1],N=c.a.useState(!1),y=Object(o.a)(N,2),k=y[0],w=y[1],S=f(!0,"layout"),C=Object(o.a)(S,2),I=C[0],L=C[1],P=f(!1,"dark-mode"),T=Object(o.a)(P,2),F=T[0],B=T[1],E=c.a.useState(["false","false","false"]),J=Object(o.a)(E,2),q=J[0],M=J[1],D=c.a.useState(!1),_=Object(o.a)(D,2),z=_[0],U=_[1],A=Object(m.e)(),R=c.a.useContext(h).setLoading,H=function(){return U((function(e){return!e}))},K=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""==a){e.next=19;break}return t={value:a},R(!0),e.next=5,fetch("".concat("https://keep-clone-unfl.onrender.com/api/notes"),{method:"POST",headers:{"Content-Type":"application/json","x-access-token":localStorage.getItem("token")},body:JSON.stringify(t)});case 5:if(c=e.sent,R(!1),200!==c.status){e.next=16;break}return e.next=10,c.json();case 10:t=e.sent,x([].concat(Object(j.a)(d),[t])),n(""),w(!1),e.next=17;break;case 16:alert("something went wrong, try again!");case 17:e.next=20;break;case 19:w(!1);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.next=3,fetch("".concat("https://keep-clone-unfl.onrender.com/api","/notes?id=").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json","x-access-token":localStorage.getItem("token")}});case 3:a=e.sent,R(!1),200===a.status?x(d.filter((function(e){return e._id!=t}))):alert("something went wrong");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var a,n,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.findIndex((function(e){return e._id===t})),n=Object(j.a)(d),c=n[a].isCompleted,e.next=5,fetch("".concat("https://keep-clone-unfl.onrender.com/api","/notes?id=").concat(t,"&isCompleted=").concat(!c),{method:"PATCH",headers:{"Content-Type":"application/json","x-access-token":localStorage.getItem("token")},body:JSON.stringify({value:n[a].value})});case 5:200===e.sent.status?(n[a]=Object(l.a)(Object(l.a)({},n[a]),{},{isCompleted:!c}),x(n)):alert("something went wrong");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.useEffect((function(){R(!0);var e=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://keep-clone-unfl.onrender.com/api/notes"),{method:"GET",headers:{"Content-Type":"application/json","x-access-token":t}});case 2:if(a=e.sent,R(!1),200!==a.status){e.next=12;break}return e.next=7,a.json();case 7:a=e.sent,x(a[0]),M([a[1],a[2],a[3]]),e.next=13;break;case 12:401===a.status&&(localStorage.removeItem("token"),alert("relogin again"),A.replace("/login"));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=localStorage.getItem("token");t?g.a.decode(t)?e(t):(localStorage.removeItem("token"),R(!1),A.replace("/login")):(R(!1),A.replace("/login"))}),[]),Object(p.jsxs)("div",{className:"main ".concat(F&&"darkMode"),children:[Object(p.jsx)(b,{layt:function(){L((function(e){return!e}))},layout:I,darkMode:F,setDarkMode:B,history:A,dp:q[2],handleProfile:H}),z?Object(p.jsx)(O,{user:q,handleProfile:H,setUser:M}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("form",{className:"addNote",children:Object(p.jsx)("textarea",{rows:k?3:1,value:a,onClick:function(){return w(!0)},onChange:function(e){return n(e.target.value)},onBlur:K,placeholder:"Take your note..."})}),d!=[]?Object(p.jsx)("ul",{className:"container ".concat(!I&&"f"),children:d.map((function(e){return Object(p.jsx)("li",{className:"noteholder ".concat(!I&&"f"),children:Object(p.jsxs)("div",{className:"note-text ".concat(!I&&"f"),children:[Object(p.jsx)("span",{className:e.isCompleted&&"cross",children:e.value}),Object(p.jsxs)("span",{className:"tools",children:[Object(p.jsx)("span",{className:"date",children:"".concat(new Date(e.date).toLocaleString())}),Object(p.jsx)("button",{className:"btn",onClick:function(){return V(e._id)},children:Object(p.jsx)(v.a,{})}),Object(p.jsx)("input",{className:"btn",type:"checkbox",id:"completed",checked:e.isCompleted,onChange:function(){return Y(e._id)}})]})]})},e._id)}))}):null]})]})},y=a(21),k=function(){var e=Object(m.e)(),t=c.a.useContext(h).setLoading,a=function(){var a=Object(u.a)(Object(i.a)().mark((function a(n){var c,s,r,o;return Object(i.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),t(!0),c=n.target.email.value,s=n.target.password.value,a.next=6,fetch("".concat("https://keep-clone-unfl.onrender.com/api/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c,password:s})});case 6:if(200!==(r=a.sent).status){a.next=15;break}return a.next=10,r.json();case 10:o=a.sent,localStorage.setItem("token",o.user),e.push("/"),a.next=17;break;case 15:t(!1),alert("wrong username or password");case 17:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return c.a.useEffect((function(){localStorage.getItem("token")&&e.replace("/")}),[]),Object(p.jsxs)("div",{className:"login-container",children:[Object(p.jsxs)("h3",{className:"start",children:["Let's set go ",Object(p.jsx)("span",{className:"high",children:"\u2570(*\xb0\u25bd\xb0*)\u256f"})," "]}),Object(p.jsx)("div",{className:"avatar"}),Object(p.jsxs)("form",{onSubmit:a,children:[Object(p.jsxs)("div",{className:"inp-content",children:[Object(p.jsx)("label",{htmlFor:"email",className:"label",children:"Please enter your email"}),Object(p.jsx)("input",{type:"email",name:"email",placeholder:" ",required:!0}),Object(p.jsx)("hr",{className:"border-bottom"}),Object(p.jsx)("span",{className:"placeholder",children:"email"})]}),Object(p.jsxs)("div",{className:"inp-content",children:[Object(p.jsx)("label",{htmlFor:"password",className:"label",children:"Please enter your password"}),Object(p.jsx)("input",{type:"password",name:"password",placeholder:" ",minLength:"6",required:!0}),Object(p.jsx)("hr",{className:"border-bottom"}),Object(p.jsx)("span",{className:"placeholder",children:"password"})]}),Object(p.jsx)("center",{children:Object(p.jsx)("input",{type:"submit",value:"Login",className:"form-button"})}),Object(p.jsx)(y.b,{to:"/register",className:"link",children:"Click here to register"})]})]})},w=function(){var e=c.a.useState(!1),t=Object(o.a)(e,2),a=t[0],n=t[1],s=Object(m.e)(),r=c.a.useContext(h).setLoading,l=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var a,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=t.target.files[0])&&a.size<2e6?((c=new FileReader).onload=function(e){var t=btoa(e.target.result);n(t)},c.readAsBinaryString(a)):alert("please choose file of size less than 2MB!");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,c,o,l;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r(!0),n=t.target.email.value,c=t.target.email.value,o=t.target.password.value,e.next=7,fetch("".concat("https://keep-clone-unfl.onrender.com/api/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,email:c,password:o,dp:a})});case 7:l=e.sent,r(!1),200===l.status?s.push("/login"):alert("user already exist");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.useEffect((function(){localStorage.getItem("token")&&s.replace("/")}),[]),Object(p.jsxs)("div",{className:"login-container",children:[Object(p.jsxs)("h3",{className:"start",children:["Let's get started ",Object(p.jsx)("span",{className:"high",children:"\u2570(*\xb0\u25bd\xb0*)\u256f"})," "]}),Object(p.jsxs)("form",{onSubmit:j,children:[Object(p.jsxs)("label",{children:[Object(p.jsxs)("div",{className:"avatar",children:[a&&Object(p.jsx)("img",{className:"dp",alt:"dp",src:"data:image/jpeg;base64,".concat(a)}),Object(p.jsx)("span",{className:"upload"})]}),Object(p.jsx)("input",{type:"file",name:"dp",accept:".jpeg, .jpg,.png",onChange:l})]}),Object(p.jsxs)("div",{className:"inp-content",children:[Object(p.jsx)("label",{htmlFor:"name",className:"label",children:"Please enter your name"}),Object(p.jsx)("input",{type:"text",name:"name",placeholder:" ",minLength:"3",required:!0}),Object(p.jsx)("hr",{className:"border-bottom"}),Object(p.jsx)("span",{className:"placeholder",children:"name"})]}),Object(p.jsxs)("div",{className:"inp-content",children:[Object(p.jsx)("label",{htmlFor:"email",className:"label",children:"Please enter your email"}),Object(p.jsx)("input",{type:"email",name:"email",placeholder:" ",required:!0}),Object(p.jsx)("hr",{className:"border-bottom"}),Object(p.jsx)("span",{className:"placeholder",children:"email"})]}),Object(p.jsxs)("div",{className:"inp-content",children:[Object(p.jsx)("label",{htmlFor:"password",className:"label",children:"Please enter your password"}),Object(p.jsx)("input",{type:"password",name:"password",placeholder:" ",minLength:"6",required:!0}),Object(p.jsx)("hr",{className:"border-bottom"}),Object(p.jsx)("span",{className:"placeholder",children:"password"})]}),Object(p.jsx)("center",{children:Object(p.jsx)("input",{type:"submit",value:"Register",className:"form-button"})}),Object(p.jsx)(y.b,{to:"/login",className:"link",children:"Click here to login"})]})]})},S=(a(279),function(){return Object(p.jsx)("div",{className:"loading-container",children:Object(p.jsx)("span",{className:"loading"})})});var C=function(){var e=c.a.useState(!1),t=Object(o.a)(e,2),a=t[0],n=t[1];return Object(p.jsxs)(h.Provider,{value:{setLoading:n},children:[a&&Object(p.jsx)(S,{}),Object(p.jsxs)(y.a,{children:[Object(p.jsx)(m.a,{path:"/login",exact:!0,component:k}),Object(p.jsx)(m.a,{path:"/register",exact:!0,component:w}),Object(p.jsx)(m.a,{path:"/",exact:!0,component:N})]})]})};r.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(C,{})}),document.getElementById("root"))},52:function(e,t,a){}},[[280,1,2]]]);
//# sourceMappingURL=main.756aa9ff.chunk.js.map