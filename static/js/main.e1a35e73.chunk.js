(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{133:function(e,t,n){},143:function(e,t,n){},145:function(e,t,n){},150:function(e,t){},152:function(e,t){},166:function(e,t){},168:function(e,t){},196:function(e,t){},198:function(e,t){},199:function(e,t){},204:function(e,t){},206:function(e,t){},225:function(e,t){},237:function(e,t){},240:function(e,t){},257:function(e,t,n){},262:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),s=n(134),r=n.n(s),o=(n(143),n(74)),i=n(9),l=n.n(i),u=n(73),p=n(18),j=n(20),d=(n(145),n(29)),m=n(1),b=function(e){var t=e.layt,n=e.layout,a=e.darkMode,c=e.setDarkMode,s=e.history;return Object(m.jsxs)("header",{className:"header",children:[Object(m.jsx)("img",{src:"https://www.gstatic.com/images/branding/product/1x/keep_2020q4_48dp.png"}),Object(m.jsx)("p",{className:"KC",children:"Keep clone"}),Object(m.jsx)("div",{className:"layoutBtn",onClick:function(){return t()},children:n?Object(m.jsx)(d.b,{}):Object(m.jsx)(d.a,{})}),Object(m.jsx)("div",{className:"layoutBtn",onClick:function(){return c(!a)},children:a?Object(m.jsx)(d.d,{}):Object(m.jsx)(d.e,{})}),Object(m.jsx)("div",{className:"layoutBtn",onClick:function(){localStorage.removeItem("token"),s.push("/login")},children:Object(m.jsx)(d.c,{})})]})},h=function(e,t){var n=c.a.useState((function(){var n=window.localStorage.getItem(t);return null!==n?JSON.parse(n):e})),a=Object(j.a)(n,2),s=a[0],r=a[1];return c.a.useEffect((function(){window.localStorage.setItem(t,JSON.stringify(s))}),[t,s]),[s,r]},f=n(135),x=n.n(f),O=n(5),g=(n(257),n(138)),k=function(){var e=c.a.useState(""),t=Object(j.a)(e,2),n=t[0],a=t[1],s=c.a.useState([]),r=Object(j.a)(s,2),i=r[0],d=r[1],f=c.a.useState(!1),k=Object(j.a)(f,2),v=k[0],N=k[1],y=h(!0,"layout"),w=Object(j.a)(y,2),S=w[0],C=w[1],I=h(!1,"dark-mode"),T=Object(j.a)(I,2),E=T[0],P=T[1],J=Object(O.e)(),_=function(){var e=Object(p.a)(l.a.mark((function e(){var t,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""==n){e.next=17;break}return t={value:n},e.next=4,fetch("".concat("https://keep-clone41.herokuapp.com/api/notes"),{method:"POST",headers:{"Content-Type":"application/json","x-access-token":localStorage.getItem("token")},body:JSON.stringify(t)});case 4:if(200!==(c=e.sent).status){e.next=14;break}return e.next=8,c.json();case 8:t=e.sent,d([].concat(Object(u.a)(i),[t])),a(""),N(!1),e.next=15;break;case 14:alert("something went wrong, try again!");case 15:e.next=18;break;case 17:N(!1);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://keep-clone41.herokuapp.com/api","/notes?id=").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json","x-access-token":localStorage.getItem("token")}});case 2:200===e.sent.status?d(i.filter((function(e){return e._id!=t}))):alert("something went wrong");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.findIndex((function(e){return e._id===t})),a=Object(u.a)(i),c=a[n].isCompleted,e.next=5,fetch("".concat("https://keep-clone41.herokuapp.com/api","/notes?id=").concat(t,"&isCompleted=").concat(!c),{method:"PUT",headers:{"Content-Type":"application/json","x-access-token":localStorage.getItem("token")},body:JSON.stringify({value:a[n].value})});case 5:200===e.sent.status?(a[n]=Object(o.a)(Object(o.a)({},a[n]),{},{isCompleted:!c}),d(a)):alert("something went wrong");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.useEffect((function(){var e=function(){var e=Object(p.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://keep-clone41.herokuapp.com/api/notes"),{method:"GET",headers:{"Content-Type":"application/json","x-access-token":t}});case 2:if(200!==(n=e.sent).status){e.next=11;break}return e.next=6,n.json();case 6:return n=e.sent,e.next=9,d(n);case 9:e.next=12;break;case 11:401===n.status&&(localStorage.removeItem("token"),alert("relogin again"),J.replace("/login"));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=localStorage.getItem("token");t?x.a.decode(t)?e(t):(localStorage.removeItem("token"),J.replace("/login")):J.replace("/login")}),[]),Object(m.jsxs)("div",{className:"main ".concat(E&&"darkMode"),children:[Object(m.jsx)(b,{layt:function(){C((function(e){return!e}))},layout:S,darkMode:E,setDarkMode:P,history:J}),Object(m.jsx)("form",{className:"addNote",children:Object(m.jsx)("textarea",{rows:v?3:1,value:n,onClick:function(){return N(!0)},onChange:function(e){return a(e.target.value)},onBlur:_,placeholder:"Take your note..."})}),i!=[]?Object(m.jsx)("ul",{className:"container ".concat(!S&&"f"),children:i.map((function(e){return Object(m.jsx)("li",{className:"noteholder ".concat(!S&&"f"),children:Object(m.jsxs)("div",{className:"note-text ".concat(!S&&"f"),children:[Object(m.jsx)("span",{className:e.isCompleted&&"cross",children:e.value}),Object(m.jsxs)("span",{className:"tools",children:[Object(m.jsx)("span",{className:"date",children:"".concat(new Date(e.date).toLocaleString())}),Object(m.jsx)("button",{className:"btn",onClick:function(){return q(e._id)},children:Object(m.jsx)(g.a,{})}),Object(m.jsx)("input",{className:"btn",type:"checkbox",id:"completed",onClick:function(){return D(e._id)}})]})]})},e._id)}))}):null]})},v=n(23),N=(n(133),function(){var e=Object(O.e)(),t=function(){var t=Object(p.a)(l.a.mark((function t(n){var a,c,s,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a=n.target.email.value,c=n.target.password.value,t.next=5,fetch("".concat("https://keep-clone41.herokuapp.com/api/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,password:c})});case 5:if(200!==(s=t.sent).status){t.next=14;break}return t.next=9,s.json();case 9:r=t.sent,localStorage.setItem("token",r.user),e.push("/"),t.next=15;break;case 14:alert("wrong username or password");case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return c.a.useEffect((function(){localStorage.getItem("token")&&e.replace("/")}),[]),Object(m.jsxs)("div",{className:"login-container",children:[Object(m.jsx)("div",{className:"avatar"}),Object(m.jsxs)("form",{onSubmit:t,children:[Object(m.jsxs)("div",{className:"inp-content",children:[Object(m.jsx)("label",{htmlFor:"email",className:"label",children:"Please enter your email"}),Object(m.jsx)("input",{type:"email",name:"email",required:!0}),Object(m.jsx)("hr",{className:"border-bottom"}),Object(m.jsx)("span",{className:"placeholder",children:"email"})]}),Object(m.jsxs)("div",{className:"inp-content",children:[Object(m.jsx)("label",{htmlFor:"password",className:"label",children:"Please enter your password"}),Object(m.jsx)("input",{type:"password",name:"password",required:!0}),Object(m.jsx)("hr",{className:"border-bottom"}),Object(m.jsx)("span",{className:"placeholder",children:"password"})]}),Object(m.jsx)("center",{children:Object(m.jsx)("input",{type:"submit",value:"Login",className:"form-button"})}),Object(m.jsx)(v.b,{to:"/register",className:"link",children:"Click here to register"})]})]})}),y=function(){var e=Object(O.e)(),t=function(){var t=Object(p.a)(l.a.mark((function t(n){var a,c,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a=n.target.email.value,c=n.target.email.value,s=n.target.password.value,t.next=6,fetch("".concat("https://keep-clone41.herokuapp.com/api/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,email:c,password:s})});case 6:200===t.sent.status?e.push("/login"):alert("user already exist");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return c.a.useEffect((function(){localStorage.getItem("token")&&e.replace("/")}),[]),Object(m.jsxs)("div",{className:"login-container",children:[Object(m.jsx)("div",{className:"avatar"}),Object(m.jsxs)("form",{onSubmit:t,children:[Object(m.jsxs)("div",{className:"inp-content",children:[Object(m.jsx)("label",{htmlFor:"name",className:"label",children:"Please enter your name"}),Object(m.jsx)("input",{type:"text",name:"name",required:!0}),Object(m.jsx)("hr",{className:"border-bottom"}),Object(m.jsx)("span",{className:"placeholder",children:"name"})]}),Object(m.jsxs)("div",{className:"inp-content",children:[Object(m.jsx)("label",{htmlFor:"email",className:"label",children:"Please enter your email"}),Object(m.jsx)("input",{type:"email",name:"email",required:!0}),Object(m.jsx)("hr",{className:"border-bottom"}),Object(m.jsx)("span",{className:"placeholder",children:"email"})]}),Object(m.jsxs)("div",{className:"inp-content",children:[Object(m.jsx)("label",{htmlFor:"password",className:"label",children:"Please enter your password"}),Object(m.jsx)("input",{type:"password",name:"password",required:!0}),Object(m.jsx)("hr",{className:"border-bottom"}),Object(m.jsx)("span",{className:"placeholder",children:"password"})]}),Object(m.jsx)("center",{children:Object(m.jsx)("input",{type:"submit",value:"Register",className:"form-button"})}),Object(m.jsx)(v.b,{to:"/login",className:"link",children:"Click here to login"})]})]})};var w=function(){return Object(m.jsxs)(v.a,{children:[Object(m.jsx)(O.a,{path:"/login",exact:!0,component:N}),Object(m.jsx)(O.a,{path:"/register",exact:!0,component:y}),Object(m.jsx)(O.a,{path:"/",exact:!0,component:k})]})};r.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(w,{})}),document.getElementById("root"))}},[[262,1,2]]]);
//# sourceMappingURL=main.e1a35e73.chunk.js.map